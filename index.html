<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="app.css" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://github.com/jashkenas/coffee-script/raw/master/extras/coffee-script.js" type="text/javascript"></script>
    <script src="lib/rect.js" type="text/javascript"></script>
    <script src="lib/para.js" type="text/javascript"></script>
    <script src="lib/slips.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).ready(function($) {
        $("#editor").submit(function() {
          var code = $("#editor textarea").val();
          var compile = function (code) {
            var jsCode;
            try {
              jsCode = CoffeeScript.compile(code, { bare: true });
              $(".console").append("<p>compile...ok</p>");
            } catch(err) {
              $(".console").append("<p>"+err.message+"</p>");
              jsCode = "Error :/";
            }
            return jsCode;
          };
          var run = function (code) {
            eval(code);
          };
          var jsCode = compile(code);
          $("#compiled textarea").text(jsCode);
          run(jsCode);
          return false;
        });
        var loadSample = function() { $("#editor textarea").val(Slips.sample()); };
        $("#load-sample").click(loadSample);
        loadSample();
        $("#editor").submit();
      });
    </script>
    <meta charset="UTF-8" />
    <title>Slips Demo</title>
  </head>
  <body>
    <h1>Slips Demo</h1>
    <div id="app">
      <h2>App</h2>
      <div class="container">
        <canvas id="slips-canvas" height="400" width="500"></canvas>
        <div id="app-content"></div>
      </div>
      <div class="console"></div>
    </div>
    <div id="code">
      <h2>Code</h2>
      <div id="editor">
        <form action="#">
          <textarea rows="16" cols="50"></textarea>
          <button id="load-sample">Load sample</button>
          <input id="run" type="submit" value="Compile &amp; Run" />
        </form>
      </div>
      <div id="compiled">
        <form action="#">
          <textarea readonly rows="16" cols="50"></textarea>
        </form>
      </div>
    </div>
  </body>
</html>
